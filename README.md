**برنامه مدیریت اپلیکیشن‌ها در وب‌کمپوننت**

- **نویسنده**: احمد کنی
- **تاریخ**: 17 دی ۱۴۰۳  
- **وضعیت**: پیش‌نویس/~~در حال بررسی~~/~~تایید شده~~

---

## **خلاصه**

این RFC پیشنهادی برای پیاده‌سازی اپلیکیشنی است که به عنوان یک وب‌کمپوننت عمل می‌کند و امکان نمایش و مدیریت اپلیکیشن‌ها را به صورت جایگاه (slots) فراهم می‌آورد. این سیستم با هدف بهبود سرعت بارگذاری اپلیکیشن‌ها و استفاده از IndexedDB برای کش کردن فایل‌ها طراحی شده است.

---

## **مسئله**

1. رمزگذاری فایل هایی که کاربر ذخیره، ویرایش یا منتقل میکند.
2. نحوه ی ذخیره سازی فایل ها به صورتی که برای اپلیکیشن ما قابل خوانش و اجرا باشد.
3. 

---

## **امنیت**

### **1. رمزگذاری محتوا**

 برای رفع این نیاز، از رمزگذاری سر تا سر (end2end) استفاده میکنیم، به این صورت که برای هر کاربر یک جفت کلید تولید میشود که سمت سرور ذخیره شده است و این جفت کلید برای هر کاربر ساخته و ارسال میشود، یک کلید عمومی (public) و یک کلید خصوصی (private).
هنگام ایجاد و ویرایش فایل، محتوای فایل ها با کلید عمومی کاربر رمزگذاری شده و در محل ذخیره سازی (گیت ریموت، indexed db، یا ...) ذخیره میشود. هر موقع کاربر نیاز به بازخوانی این اطلاعات داشت، با استفاده از کلید خصوصی میتواند آن را بازخوانی کند.
الگوریتم پیشنهادی برای رمزگذاری فایل های بزرگ مانند فایل هایی که ما داریم AES-256  و کتابخانه‌ی پیشنهادی برای پیاده‌سازی این الگوریتم SJCL است.


### **2. یکپارچگی اطلاعات**

از آنجایی که اطلاعات موجود در فایل ها در یک مخزن گیت ذخیره میشوند (چه در گیت ریموت چه در فضای ذخیره‌سازی عمومی)، ابزارهایی که گیت برای بررسی این یکپارچگی در اختیار ما قرار میدهد این نیاز را رفع میکند.

### **3. دسترسی**

برای این نیاز، سمت گیت ریموت از راه حل‌های موجود برای Authorization استفاده شود.

---

## **مدل چینش فایل**

مدل چینش فایل ها برای اجرای برنامه ها به این صورت خواهد بود که کاربر یک فایل config.json برای ما آماده میکند، این فایل شامل اطلاعات مهم برای bundle کردن و همچنین اطلاعات کاربردی درباره‌ی برنامه ی مورد نظر و محل فایل های مهم پروژه است.
به عنوان نمونه، یک فایل config.json میتواند شامل این موارد باشد: 
```
{
  "entry": "main.js",
  "output": "bundle.js",
  "type": "module",
  "app": {"type": "web component", "name": "my-wc", "html": "index.html"},
  "package": "package.json",
  
}
```
با استفاده از این فایل میتوانیم فایل ورودی و فایل خروجی را بگیریم و انواع مختلف application ها را با آن اجرا کنیم. همچنین میتوان بسته‌های داخل package را به صورت cdn یا محلی نصب کنیم و اجازه‌ی استفاده از آن‌ها را به کاربر بدهیم.

---
## **نکته پایانی**

این RFC روشی برای مدیریت و بارگذاری انواع اپلیکیشن‌ها در یک وب‌کمپوننت سمت کاربر ارائه می‌دهد. لطفاً نظرات، پیشنهادات و انتقادات خود را ارائه دهید تا این طرح بهبود یابد.  

---

### **چگونه به این RFC نظر بدهید؟**

- نظرات و پیشنهادات خود را در قالب Issue در مخزن پروژه ارسال کنید.  
